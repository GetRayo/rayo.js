<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <meta http-equiv="X-UA-Compatible" content="IE=edge">
 <meta name="viewport" content="width=device-width, initial-scale=1">
 <meta name="description" content="Rayo; micro-framework for Nodejs.">
 <meta name="author" content="https://github.com/aichholzer">
 <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/GetRayo/Assets/master/Images/rayo_sm.png">
 <title>rayo.js</title>
 <link href="https://fonts.googleapis.com/css?family=Muli|Source+Code+Pro" rel="stylesheet">
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
 <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
 <link href="./css/rayo.css" rel="stylesheet">
 <!--[if lt IE 9]>
 <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
 <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
 <![endif]-->
</head>
<body>
<div class="container">
 <div class="row">
   <div class="col-md-12" style="text-align: center;">
     <img src="https://raw.githubusercontent.com/GetRayo/Assets/master/Images/Cover.png" alt="Rayo" />
   </div>
 </div>
 <div class="row">
   <div class="col-md-12">
     <h3 id="in-a-nutshell">En resumidas cuentas</h3>
     <ul>
       <li>Realmente r√°pido (En serio, muy r√°pido. Dir√≠gete a<a href="#c√≥mo-se-compara)">c√≥mo se compara</a>)  para saber m√°s,</li>
       <li>API similar a 'express'¬π,</li>
       <li>Compatible con el middleware 'express' </li>
       <li>Extensible &amp; conectable,</li>
       <li>Menos de 150 l√≠neas de c√≥digo, con redireccionamiento y todo!.</li>
     </ul>
     <blockquote>
       ¬π `Rayo` no tiene la intenci√≥n de ser un reemplazo de express, la API es similar, inspirada en, pero no id√©ntica.
     </blockquote>
     <h3 id="install">Instalaci√≥n</h3>
     <pre>$&gt; npm i rayo</pre>
     <h3 id="use">Modo de Uso</h3>
     <pre>const rayo = require('rayo');
rayo({ port: 5050 })
 .get('/hello/:user', (req, res) =&gt; res.end(`Hello ${req.params.user}`))
 .start();</pre>

     <h4>Con m√∫ltiples manejadores(handlers)</h4>
     <pre>const rayo = require('rayo');
// "age" handler
const age = (req, res, step) =&gt; {
 req.age = 21;
 step();
};
// "name" handler
const name = (req, res, step) =&gt; {
 req.name = `Super ${req.params.user}`;
 step();
};
rayo({ port: 5050 })
 .get('/hello/:user', age, name, (req, res) =&gt; {
   res.end(
     JSON.stringify({
       age: req.age,
       name: req.name
     })
   );
 })
 .start();</pre>
     <h4>Nota sobre los Handlers</h4>
     <p><code>Las funciones `Handlers`</code> aceptan un <a href="https://nodejs.org/api/http.html#http_class_http_incomingmessage">IncomingMessage</a> (a su vez denominados `req`), un <a href="https://nodejs.org/dist/latest-v9.x/docs/api/http.html#http_class_http_serverresponse">ServerResponse</a>          (denominados `res`) y una funci√≥n `step through` (denominados `step`). `step()` es opcional, ser√≠a  usado para mover la l√≥gica de ejecuci√≥n del programa al siguiente Handler de la pila.</p>
     <p>step()` tambi√©n puede ser utilizado para retornar un error en cualquier momento. See <a href="#manejo-de-errores">manejo de errores</a>.</p>
     <blockquote>Se generar√° un error si `step()` es llamada desde una pila vac√≠a.</blockquote>
     <p>Cada `handler` expone el objeto ServerResponse(`res`) nativo de Node y es tu responsabilidad manejarlo adecuadamente; Ej: terminar la respuesta (`res.end()`) donde es debido.</p>
     <p>Para su comodidad, Rayo enlaza una funci√≥n <code>send()</code> inteligente a cada ServerResponse (res) que recibe el handler, de otra manera deber√°s enviar respuestas <code>res.send()</code>.</p>
     <p><code>res.send()</code> intentar√° adivinar el tipo de contenido y enviar los headers (encabezados) apropiados, c√≥digos de estado (status code) y el cuerpo del mensaje, a su vez enviando la finalizaci√≥n de la respuesta (end).</p>
     <pre>const rayo = require('rayo');
rayo({ port: 5050 })
 .get('/', (req, res) =&gt; {
   res.send({
     message: 'I am .json reply.',
     timestamp: +new Date()
   });
 })
 .start();</pre>
     <blockquote>
       <code>res.send()</code> afectar√° la performance debido a que los headers ser√°n definidos con cada respuesta, sin importar la intenci√≥n de los mismos. 
     </blockquote>
     <h4>Firma de un Handler</h4>
     <pre>/**
* @param {object}   req
* @param {object}   res
* @param {function} [step]
*/
const fn = (req, res, step) =&gt; {
 // Tu l√≥gica.
}</pre>
     <h3 id="error-handling">Error handling</h3>
     <pre>Por favor, ten presente que:
"Tu c√≥digo, Tus errores."¬≤
- Es tu responsabilidad tratar con ellos adecuadamente.</pre>
     <blockquote>
       <p>¬≤ `Rayo` se encuentra en estado WIP (Work in Progress - En desarrollo), por lo tanto es posible que te topes con errores reales, con los que deber√°s lidiar para resolverlos. De ser asi, por favor haznoslo saber y apuntalos mediante una `pull request`. üëç</p>
     </blockquote>
     <p>Si est√°s implementando tu propia funci√≥n error (Ver `onError` debajo de  <a href="#rayooptions--">opciones</a>) deber√≠as invocarla, en cualquier momento, llamando a la funci√≥n <code>step()</code> con un argumento.</p>
     <pre>const rayo = require('rayo');





const options = {
 port: 5050,
 onError: (error, req, res) =&gt; {
   res.end(`Here's your error: ${error}`);
 }
};





rayo(options)
 .get('/', (req, res, step) =&gt; step('Thunderstruck!'))
 .start();</pre>
     <p>En el ejemplo anterior, el error ser√° retornado en la ruta `/`, dado que `step()` es llamada con un argumento. Ejecuta el ejemplo, abre tu explorador y ve a [http://localhost:5050](http://localhost:5050) y ver√°s lo siguiente: "Here's your error: Thunderstruck!".
</p>
     <p>Si no tienes una funci√≥n de error, de igual manera deber√°s llamar a la funci√≥n `step()` (con un argumento), que usar√° funci√≥n de error propia de Rayo.</p>
     <h3 id="api">API</h3>
     <h4 id="rayooptions--" class="no-top-border">rayo(options = {})</h4>
     <pre>@param   {object} [options]
@returns {Rayo}</pre>
     <ul class="sub-u">
       <li>
         <p>options.port <em>{number}</em></p>
         <ul>
           <li>Escucha en el puerto indicado posibles conexiones.</li>
           <li>Si se omite el puerto o es 0 (cero), el sistema operativo asignar√° un puerto, libre, arbitrariamente.</li>
         </ul>
       </li>
       <li>
         <p>options.host <em>{string}</em></p>
         <ul>
           <li>Escucha el host esperando conexiones entrantes.</li>
           <li>Si se omite el host, el servidor aceptar√° conecciones sobre la direcci√≥n ip sin especificar (::) cuando IPv6 est√© disponible, o sobre la direcci√≥n IPv4 sin especificar (0.0.0.0) en todo caso.</li>
         </ul>
       </li>
       <li>
         <p>options.server <em>{http.Server}</em></p>
         <ul>
           <li>Una instancia <a href="https://nodejs.org/api/http.html#http_class_http_server">http.Server</a>. `Rayo` se adjunta a este</li>
           <li>`Default:` Una nueva instancia  <a href="https://nodejs.org/api/http.html#http_class_http_server">http.Server</a>.</li>
         </ul>
       </li>
       <li>
         <p>options.notFound <em>{function}</em></p>
         <blockquote>
          Invocada cuando campos indefinidos son requeridos.
         </blockquote>
         <pre>
/**
* @param {object} req
* @param {object} res
*/
const fn = (req, res) => {
 // Tu l√≥gica..
}</pre>
         <blockquote>
          `Default:` Rayo finalizara la respuesta con un mensaje de "Page not found." y un c√≥digo de estado `404`.
         </blockquote>
       </li>
     </ul>
     <ul>
       <li>
         <p>options.onError <em>{function}</em></p>
         <blockquote>
           Invocada cuando `step()` es llamada con un argumento.
         </blockquote>
       </li>
       <pre>
/**
* @param {*}        error
* @param {object}   req
* @param {object}   res
* @param {function} [step]
*/
const fn = (error, req, res, step) => {
 // Tu l√≥gica..
}</pre>
     </ul>
     <h4 id="verbpath-handlers">.verb(path, ‚Ä¶handlers)</h4>
     <pre>@param   {string}   path
@param   {function} handlers - Any number, comma separated.
@returns {rayo}</pre>
     <blockquote>
       `Rayo` expone todos los verbos HTTP como m√©todos de instancia.
       <br />Peticiones que se correspondan con el verbo propuesto y la ruta, ser√°n redireccionadas a trav√©s de handlers espec√≠ficos.
     </blockquote>
     <p>Este m√©todo es b√°sicamente un alias del m√©todo <a href="#routeverb-path-handlers">.route</a> con la diferencia de que el `verbo` es definido nombre del m√©todo en s√≠ mismo.</p>
     <pre>const rayo = require('rayo');


/**
* Asigna una ruta ('/') en los verbos HTTP especificados.
*/
rayo({ port: 5050 })
 .get('/', (req, res) =&gt; res.end('Thunderstruck, GET'))
 .head('/', (req, res) =&gt; res.end('Thunderstruck, HEAD'))
 .start();</pre>
     <h4 id="allpath-handlers">.all(path, ‚Ä¶handlers)</h4>
     <pre>@param   {string}   path
@param   {function} handlers - Cualquier n√∫mero, separados por coma.
@returns {rayo}</pre>
     <blockquote>
       Peticiones que se correspondan con alg√∫n verbo y la ruta especificada, ser√°n redireccionadas a trav√©s de handlers espec√≠ficos.
     </blockquote>
     <pre>const rayo = require('rayo');
/**
* Asigna una ruta ('/') en todos los verbos HTTP especificados.
*/
rayo({ port: 5050 })
 .all('/', (req, res) =&gt; res.end('Thunderstruck, all verbs.'))
 .start();</pre>
     <h4 id="throughhandlers">.through(‚Ä¶handlers)</h4>
     <pre>@param   {function} handlers - Cualquier n√∫mero, separados por coma.
@returns {rayo}</pre>
     <blockquote>
       Todas las peticiones, cualquier verbo y cualquier ruta, ser√°n redireccionadas a trav√©s de los handlers espec√≠ficos.
     </blockquote>
     <pre>const rayo = require('rayo');


// "age" handler
const age = (req, res, step) =&gt; {
 req.age = 21;
 step();
};


// "name" handler
const name = (req, res, step) =&gt; {
 req.name = 'Rayo';
 step();
};





rayo({ port: 5050 })
 .through(age, name)
 .get('/', (req, res) =&gt; res.end(`${req.age} | ${req.name}`))
 .start();</pre>
     <h4 id="routeverb-path-handlers">.route(verb, path, ‚Ä¶handlers)</h4>
     <pre>@param   {string}   verb
@param   {string}   path
@param   {function} handlers - Cualquier n√∫mero, separados por coma.
@returns {rayo}</pre>
     <blockquote>
      Las peticiones que se correspondan con el verbo provisto y la ruta, ser√°n redireccionadas a trav√©s de los handlers espec√≠ficos. 
     </blockquote>
     <pre>const rayo = require('rayo');



rayo({ port: 5050 })
 .route('GET', '/', (req, res) =&gt; res.end('Thunderstruck, GET'))
 .start();</pre>
     <h4 id="bridgepath">.bridge(path)</h4>
     <pre>@param   {string} path - La ruta URL a la cual los verbos deben ser mapeados.
@returns {bridge}</pre>
     <blockquote>
       Redirecciona una ruta Route one path through multiple verbs and handlers.
     </blockquote>
     <p>Una instancia <code>bridge</code> expone todos los m√©todos de redireccionamiento de Rayo (<a href="#throughhandlers">.through</a>, <a href="#routeverb-path-handlers">.route</a>, <a href="#verbpath-handlers">.verb</a> y <a href="#allpath-handlers">.all</a>). Tu crearas cualquier n√∫mero de `bridges` y Rayo autom√°gicamente se ocupar√° de mapearlos. 
</p>
     <p>Lo que hace de los <code>bridges</code> algo realmente genial es el hecho que permiten un control muy granular sobre lo que tu aplicaci√≥n expone. Por ejemplo, habilitar <a href="https://github.com/GetRayo/rayo.js/tree/master/packages/plugins/compress">compresion de contenido</a> solo en ciertas rutas..</p>
     <pre>const rayo = require('rayo');
const server = rayo({ port: 5050 });



/**
* ‚ÄòBridge‚Äô (puentea) la ruta `/home` a los verbos `GET` y `HEAD`.
*/
server
 .bridge('/home')
 .get((req, res) =&gt; res.end('You are home, GET'))
 .head((req, res) =&gt; res.end('You are home, HEAD'));




/**
* ‚ÄòBridge‚Äô (puentea) la ruta `/game` a los verbos `POST` y `PUT`.
*/
server
 .bridge('/game')
 .post((req, res) =&gt; res.end('You are at the game, POST'))
 .put((req, res) =&gt; res.end('You are at the game, PUT'));




const auth = (req, res, step) =&gt; {
 req.isAuthenticated = true;
 step();
};


const session = (req, res, step) =&gt; {
 req.hasSession = true;
 step();
};




/**
*‚ÄòBridge‚Äô (puentea) la ruta `/account` a los verbos `GET`, `POST`  y `PUT`.
* y a trav√©s de dos handlers.
*/
server
 .bridge('/account')
 .through(auth, session)
 .get((req, res) =&gt; res.end('You are at the account, GET'))
 .post((req, res) =&gt; res.end('You are at the account, POST'))
 .put((req, res) =&gt; res.end('You are at the account, PUT'));




server.start();</pre>
     <h4 id="startcallback">.start(callback)</h4>
     <pre>@param   {function} [callback] - Invocada en el evento `listening` del servidor.
@returns {http.Server}</pre>
     <blockquote>
       <p> `Rayo` retornar√° la direcci√≥n del server con el callback (devoluci√≥n de llamada), si fue provisto de una. Muy √∫til, por ejemplo, para obtener el puerto del servidor en caso que no se haya especificado un puerto en las opciones.</p>
       <p>Inicia `Rayo` -Tu servidor ahora est√° escuchando peticiones entrantes.</p>
     </blockquote>





     <pre>const rayo = require('rayo');



rayo({ port: 5050 });
 .get((req, res) =&gt; res.end('Thunderstruck'))
 .start((address) =&gt; {
   console.log(`Rayo is up on port ${address.port}`);
 });</pre>
     <h3 id="how-does-it-compare">C√≥mo se compara?</h3>
     <p></p>Visita el<a href="https://github.com/GetRayo/rayo.js#how-does-it-compare">repositorio</a> Para los √∫ltimos resultados..
     <p>Correlos en tu propio hardware; Clona este repositorio; Instala las dependencias y corre npm run bench`. Opcional: podr√≠as definir los par√°metros de los test:</p>
     <pre>$&gt; npm run bench -- -u http://localhost:5050 -c 1000 -p 25 -d 10</pre>
     <ul>
       <li><code>-u</code> <em>url</em> -Default: http://localhost:5050</li>
       <li><code>-c</code> <em>conecciones</em> -Default: 100</li>
       <li><code>-p</code> <em>pipelines</em> -Default: 10</li>
       <li><code>-d</code> <em>duraci√≥n</em> -Default: 10 (segundos)</li>
       <li><code>-o</code> <em>only</em> Corre solo un benchmark en particular. -Por defecto en `null`</li>
     </ul>
     <blockquote>
        Por favor tener en cuenta que estos resultados  <del>pueden</del> variar√°n en diferentes configuraciones de hardware.
     </blockquote>
     <h3 id="examples">Ejemplos</h3>
     <p>Podr√°n encontrarlos <a href="https://github.com/GetRayo/rayo.js/tree/master/docs/examples">aqui</a>.</p>
     <h3 id="contribute">Contribuye</h3>
     <pre>$&gt; fork https://github.com/GetRayo/rayo.js
$&gt; Piensas
$&gt; enviar un PR</pre>
     <h3 id="acknowledgements">Agradecimientos</h3>
     <p>üëèüèº `Gracias` a <a href="https://github.com/nodejs/node/graphs/contributors">todos</a> quienes hicieron Nodejs posible y a todos los miembros de la comunidad que activamente contribuyen a este.</p>
     <h3 id="license">Licencia</h3>
     <p><a href="https://github.com/GetRayo/rayo.js/blob/master/LICENSE">MIT</a></p>
   </div>
 </div>
 <div class="row footer">
   <div class="col-md-12" style="text-align: center;">
     <a href="https://github.com/aichholzer"><i class="fa fa-heart fa-1x" aria-hidden="true"></i></a>
   </div>
 </div>
</div>
</body>
</html>
